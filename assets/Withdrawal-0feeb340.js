import{r,A as g,J as j,j as a,F as C,c as e,K as R}from"./index-7a7cd404.js";import{S as b}from"./Toast-8d4a8ec4.js";import{Y as u,y}from"./transition-4e664467.js";const $=()=>{const[p,d]=r.useState(!1),[o,v]=r.useState(),[N,A]=r.useState(),[k,m]=r.useState({withdrawAmount:""}),[S,f]=r.useState(0),[F,w]=r.useState(0),[T,h]=r.useState(!1);r.useEffect(()=>{x()},[]);const x=async()=>{var t,s;try{h(!0);const l=await g("get",j);if(l instanceof Error)console.error("Error fetching allMembers list:",l.message);else if(l.status===200){A((t=l==null?void 0:l.data)==null?void 0:t.walletAmount);const i=(s=l==null?void 0:l.data)==null?void 0:s.walletWithdrawHistory.map(c=>({...c,createdAt:D(c.createdAt)}));v(i),h(!1)}else console.error("Error fetching allMembers list. Unexpected status:",l.status)}catch(l){console.error("Error fetching allMembers list:",l)}finally{h(!1)}},_=t=>{const s=t.target.value;if(s==="")f(0),w(0),m({withdrawAmount:""});else if(/^[0-9]+$/.test(s)){const l=parseFloat(s),i=l*.1,c=l-i;f(i),w(c),m({withdrawAmount:s})}},q=async t=>{var s,l,i,c;t.preventDefault();try{const n=await g("post",R,k);console.log(n.error),n.status===200&&(m({withdrawAmount:""}),d(!1),x(),b({message:"withdrawal requested",type:!0}))}catch(n){console.log((l=(s=n==null?void 0:n.response)==null?void 0:s.data)==null?void 0:l.message),b({message:(c=(i=n==null?void 0:n.response)==null?void 0:i.data)==null?void 0:c.message,type:!1})}},D=t=>{const s=new Date(t);return`${s.getDate()}-${s.getMonth()+1}-${s.getFullYear()}`};return a(C,{children:[a("div",{className:"panel",children:[e("div",{className:"flex justify-between items-center mb-5",children:e("h5",{className:"font-semibold text-primary text-lg dark:text-white-light",children:"Withdrawal"})}),a("div",{className:"panel lg:h-[100px]  sm:h-auto flex gap-4  items-center justify-around bg-primary text-white mb-3 max-w-sm",children:[a("div",{className:"flex flex-col gap-2",children:[a("h1",{className:"text-[25px] font-semibold",children:["₹ ",N]}),e("h5",{className:"font-semibold text-md text-warning",children:"Your Balance"})]}),e("div",{className:"flex h-full justify-between items-center  dark:text-white-light",children:e("img",{src:"/assets/images/wallet.svg",alt:""})})]}),e("button",{onClick:()=>d(!0),className:"panel flex items-center ml-auto mb-3  p-2 text-base bg-primary text-white justify-center max-w-[220px] w-full ",children:"Request withdrawal cash"}),e("div",{className:"table-responsive mb-5",children:a("table",{children:[e("thead",{children:a("tr",{children:[e("th",{children:"Requested Amount"}),e("th",{children:"Date"}),e("th",{children:"TDS Amount"}),e("th",{children:" Total Amount"}),e("th",{children:" Status"})]})}),e("tbody",{children:T?e("tr",{children:e("td",{colSpan:7,style:{textAlign:"center"},children:e("span",{className:"animate-[spin_2s_linear_infinite] border-8 border-[#f1f2f3] border-l-primary border-r-primary rounded-full w-14 h-14 inline-block align-middle m-auto mb-10"})})}):(o==null?void 0:o.length)>0?o==null?void 0:o.map(t=>a("tr",{children:[e("td",{children:a("div",{className:"whitespace-nowrap",children:["₹ ",t==null?void 0:t.requestedAmount]})}),e("td",{children:t==null?void 0:t.createdAt}),e("td",{children:t==null?void 0:t.TDS}),a("td",{children:["₹ ",t==null?void 0:t.releasedAmount]}),e("td",{children:e("div",{className:`whitespace-nowrap w-fit px-2 py-1 text-white rounded-md ${t.status==="Approved"?"bg-success":t.status==="Pending"?"bg-yellow-400":"bg-red-600"}`,children:t.status})})]},t==null?void 0:t._id)):e("tr",{children:e("td",{colSpan:7,style:{textAlign:"center"},children:e("span",{className:"align-middle m-auto mb-10",children:"No withdrawal"})})})})]})})]}),e("div",{children:e(u,{appear:!0,show:p,as:r.Fragment,children:a(y,{as:"div",open:p,onClose:()=>{d(!1)},children:[e(u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0"})}),e("div",{id:"register_modal",className:"fixed inset-0 bg-[black]/60 z-[999] overflow-y-auto",children:e("div",{className:"flex items-start justify-center min-h-screen px-4",children:e(u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a(y.Panel,{className:"panel border-0 py-1 px-4 rounded-lg overflow-hidden w-full max-w-[500px] my-8 text-black dark:text-white-dark",children:[a("div",{className:"flex items-center justify-between p-5 font-semibold text-lg dark:text-white",children:[e("h5",{className:"text-warning",children:"Request Withdrawal"}),e("button",{type:"button",onClick:()=>d(!1),className:"text-white-dark hover:text-dark text-[28px] p-2",children:"×"})]}),e("div",{className:"p-5",children:a("form",{className:"space-y-5 dark:text-white flex flex-col items-center ",onSubmit:q,children:[e("div",{className:"flex  w-full flex-col lg:flex-row gap-5 lg:flex-wrap",children:e("div",{className:"space-y-5 w-full",children:a("div",{children:[e("label",{htmlFor:"Amount",children:"Amount"}),a("div",{className:"relative text-white-dark",children:[e("input",{onChange:_,id:"Name",type:"number",required:!0,placeholder:"Enter Amount",className:"form-input ps-5 placeholder:text-white-dark"}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2"})]})]})})}),e("div",{className:"flex  w-full flex-col lg:flex-row gap-5 lg:flex-wrap",children:e("div",{className:"space-y-5  w-full",children:a("div",{children:[e("label",{htmlFor:"TDSAmount",children:"TDS Amount"}),e("div",{className:"relative text-white-dark",children:e("span",{className:" start-4 top-1/2 -translate-y-1/2",children:S})})]})})}),e("div",{className:"flex  w-full flex-col lg:flex-row gap-5 lg:flex-wrap",children:e("div",{className:"space-y-5 w-full",children:a("div",{children:[e("label",{htmlFor:"TotalAmount",children:"Total Amount"}),e("div",{className:"relative text-white-dark",children:e("span",{className:" start-4 top-1/2 -translate-y-1/2",children:F})})]})})}),a("div",{className:`flex w-full\r
                                                 justify-center gap-4`,children:[e("button",{onClick:()=>d(!1),className:"btn bg-primary text-white !mt-6 w-full max-w-[150px] border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",children:"cancel"}),e("button",{type:"submit",className:"btn bg-primary text-white !mt-6 w-full max-w-[150px] border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",children:"Submit"})]})]})})]})})})})]})})})]})};export{$ as default};
