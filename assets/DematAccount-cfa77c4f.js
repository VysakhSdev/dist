import{r,u as Z,a as Y,g as H,A as h,b as B,d as G,z as J,p as K,j as s,F as O,c as e,e as Q}from"./index-7a7cd404.js";import{S as A}from"./Toast-8d4a8ec4.js";import{Y as w,y as D}from"./transition-4e664467.js";const te=()=>{const[m,F]=r.useState([]),[v,C]=r.useState([]),[N,U]=r.useState([]),[y,_]=r.useState([]),[u,L]=r.useState(""),[f,j]=r.useState(""),[x,z]=r.useState(""),[p,o]=r.useState(!1),[b,R]=r.useState(!1),[n,c]=r.useState({name:"",phone:"",demateUserName:"",email:"",state:"",district:"",zonal:"",panchayath:"",address:""});r.useState("");const[I,g]=r.useState(!1),{stateList:S}=Z(t=>t.location),$=Y();r.useEffect(()=>{k()},[]),r.useEffect(()=>{(p===!0||b===!0)&&$(H())},[p,b]),r.useEffect(()=>{u&&P(),f&&T(),x&&M()},[u,f,x]);const k=async()=>{var t;try{g(!0);const a=await h("get",B);a instanceof Error?console.error("Error fetching state list:",a.message):a.status===200?(F((t=a==null?void 0:a.data)==null?void 0:t.demateAccounts),g(!1)):console.error("Error fetching state list. Unexpected status:",a.status)}catch(a){console.error("Error fetching state list:",a)}finally{g(!1)}},q=async t=>{var a,l,i,E;t.preventDefault();try{(await h("post",Q,n)).status===200&&(o(!1),k(),c({name:"",phone:"",demateUserName:"",email:"",state:"",district:"",zonal:"",panchayath:"",address:""}),A({message:"Add Demat Account success",type:!0}))}catch(d){console.log((l=(a=d==null?void 0:d.response)==null?void 0:a.data)==null?void 0:l.message),A({message:(E=(i=d==null?void 0:d.response)==null?void 0:i.data)==null?void 0:E.message,type:!1})}},P=async()=>{var t;try{const a=await h("get",`${G}/${u}`);a instanceof Error?console.error("Error fetching state list:",a.message):a.status===200?C((t=a==null?void 0:a.data)==null?void 0:t.districts):console.error("Error fetching state list. Unexpected status:",a.status)}catch(a){console.error("Error fetching state list:",a)}},T=async()=>{var t;try{const a=await h("get",`${J}/${f}`);a instanceof Error?console.error("Error fetching state list:",a.message):a.status===200?U((t=a==null?void 0:a.data)==null?void 0:t.zonals):console.error("Error fetching state list. Unexpected status:",a.status)}catch(a){console.error("Error fetching state list:",a)}},M=async()=>{var t;try{const a=await h("get",`${K}/${x}`);a instanceof Error?console.error("Error fetching state list:",a.message):a.status===200?_((t=a==null?void 0:a.data)==null?void 0:t.panchayaths):console.error("Error fetching state list. Unexpected status:",a.status)}catch(a){console.error("Error fetching state list:",a)}},V=t=>{const a=t.target.value,l=S.find(i=>i.stateName===a);l&&(c({...n,state:l.stateName,district:""}),L(l.id))};return s(O,{children:[s("div",{className:"panel 'h-full'}",children:[s("div",{className:"flex items-center justify-between mb-5",children:[e("h5",{className:"font-semibold text-primary text-lg dark:text-white-light",children:"Demat Account"}),e("button",{onClick:()=>o(!0),className:"panel flex items-center overflow-x-auto whitespace-nowrap p-2 text-base bg-primary text-warning justify-center max-w-[100px] w-full ",children:"Add"})]}),e("div",{className:"table-responsive mb-5",children:s("table",{children:[e("thead",{children:s("tr",{children:[e("th",{children:"SIno"}),e("th",{children:"Name"}),e("th",{children:"Phone"}),e("th",{children:"Demat Username"}),e("th",{children:" Email"}),e("th",{children:" Address"})]})}),e("tbody",{children:I?e("tr",{children:e("td",{colSpan:7,style:{textAlign:"center"},children:e("span",{className:"animate-[spin_2s_linear_infinite] border-8 border-[#f1f2f3] border-l-primary border-r-primary rounded-full w-14 h-14 inline-block align-middle m-auto mb-10"})})}):(m==null?void 0:m.length)>0?m.map((t,a)=>s("tr",{children:[e("td",{children:e("div",{className:"font-medium text-base",children:a+1})}),e("td",{className:"font-medium text-base",children:t==null?void 0:t.name}),e("td",{children:e("div",{className:"whitespace-nowrap font-medium text-base",children:t==null?void 0:t.phone})}),e("td",{className:"font-medium text-base",children:t==null?void 0:t.demateUserName}),e("td",{className:"font-medium text-base",children:t==null?void 0:t.email}),e("td",{className:"text-center font-medium text-base",children:t==null?void 0:t.address})]},a)):e("tr",{children:e("td",{colSpan:7,style:{textAlign:"center"},children:e("span",{className:"align-middle m-auto mb-10",children:"No Accounts"})})})})]})})]}),e(w,{appear:!0,show:p,as:r.Fragment,children:s(D,{as:"div",open:p,onClose:()=>{o(!1)},children:[e(w.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0"})}),e("div",{id:"register_modal",className:"fixed inset-0 bg-[black]/60 z-[999] overflow-y-auto",children:e("div",{className:"flex items-start justify-center min-h-screen px-4",children:e(w.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s(D.Panel,{className:"panel border-0 py-1 px-4 rounded-lg overflow-hidden w-full max-w-[500px] my-8 text-black dark:text-white-dark",children:[s("div",{className:"flex items-center justify-between p-5 font-semibold text-lg dark:text-white",children:[e("h5",{className:"text-warning",children:"Add Demat Account"}),e("button",{type:"button",onClick:()=>o(!1),className:"text-white-dark hover:text-dark text-[28px] p-2",children:"Ã—"})]}),e("div",{className:"p-5",children:s("form",{className:"space-y-3 dark:text-white flex flex-col items-center ",onSubmit:q,children:[e("div",{className:"flex  w-full flex-col lg:flex-row gap-5 lg:flex-wrap",children:e("div",{className:"space-y-5 w-full",children:s("div",{children:[e("label",{htmlFor:"Name",children:"Name"}),s("div",{className:"relative text-white-dark",children:[e("input",{onChange:t=>{c({...n,name:t.target.value})},id:"Name",type:"text",required:!0,placeholder:"Enter Name",className:"form-input ps-5 placeholder:text-white-dark"}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2"})]})]})})}),e("div",{className:"flex  w-full flex-col lg:flex-row gap-5 lg:flex-wrap",children:e("div",{className:"space-y-5  w-full",children:s("div",{children:[e("label",{htmlFor:"phone",children:"Phone"}),e("div",{className:"relative text-white-dark",children:e("input",{onChange:t=>{c({...n,phone:t.target.value})},id:"phone",type:"text",required:!0,placeholder:"Enter Phone number",className:"form-input ps-5 placeholder:text-white-dark"})})]})})}),e("div",{className:"flex  w-full flex-col lg:flex-row gap-5 lg:flex-wrap",children:e("div",{className:"space-y-5 w-full",children:s("div",{children:[e("label",{htmlFor:"username",children:"Demat Username"}),e("div",{className:"relative text-white-dark",children:e("input",{onChange:t=>{c({...n,demateUserName:t.target.value})},id:"username",required:!0,type:"text",placeholder:"Enter your Demat username",className:"form-input ps-5 placeholder:text-white-dark"})})]})})}),e("div",{className:"flex  w-full flex-col lg:flex-row gap-5 lg:flex-wrap",children:e("div",{className:"space-y-5 w-full",children:s("div",{children:[e("label",{htmlFor:"email",children:"Email"}),e("div",{className:"relative text-white-dark",children:e("input",{onChange:t=>{c({...n,email:t.target.value})},id:"email",type:"email",placeholder:"Enter email",required:!0,className:"form-input ps-5 placeholder:text-white-dark"})})]})})}),s("div",{className:" w-full",children:[e("label",{htmlFor:"Email",children:"State"}),e("div",{className:"relative text-white-dark",children:s("select",{className:"form-input ps-10 placeholder:text-white-dark",onChange:V,value:n.state,children:[e("option",{value:"",children:"Select State"},"default"),S.map((t,a)=>e("option",{value:t.stateName,children:t.stateName},a))]})})]}),s("div",{className:" w-full",children:[e("label",{htmlFor:"district",children:"District"}),e("div",{className:"relative text-white-dark",children:s("select",{className:"form-input ps-10 placeholder:text-white-dark",onChange:t=>{const a=t.target.value,l=v.find(i=>i.name===a);l&&(c(i=>({...i,district:l==null?void 0:l.name})),j(l==null?void 0:l.id))},value:n.district,children:[e("option",{children:"Select District "}),v.map(t=>e("option",{value:t.name,children:t.name},t.id))]})})]}),s("div",{className:" w-full",children:[e("label",{htmlFor:"zonal",children:"zonal"}),e("div",{className:"relative text-white-dark",children:s("select",{className:"form-input ps-10 placeholder:text-white-dark",onChange:t=>{const a=t.target.value,l=N.find(i=>i.name===a);l&&(c(i=>({...i,zonal:l==null?void 0:l.name})),z(l==null?void 0:l.id))},value:n.zonal,children:[e("option",{children:"Select zonal "}),N.map(t=>e("option",{value:t.name,children:t.name},t.id))]})})]}),s("div",{className:" w-full",children:[e("label",{htmlFor:"panchayath",children:"panchayath"}),e("div",{className:"relative text-white-dark",children:s("select",{className:"form-input ps-10 placeholder:text-white-dark",onChange:t=>{const a=t.target.value,l=y.find(i=>i.name===a);l&&c(i=>({...i,panchayath:l==null?void 0:l.name}))},value:n.panchayath,children:[e("option",{children:"Select panchayath "}),y.map(t=>e("option",{value:t.name,children:t.name},t.id))]})})]}),e("div",{className:"flex  w-full flex-col lg:flex-row gap-5 lg:flex-wrap",children:e("div",{className:"space-y-5 w-full",children:s("div",{children:[e("label",{htmlFor:"address",children:"Address"}),e("div",{className:"relative text-white-dark",children:e("input",{onChange:t=>{c({...n,address:t.target.value})},id:"address",required:!0,type:"text",placeholder:"Enter your address",className:"form-input ps-5 placeholder:text-white-dark"})})]})})}),s("div",{className:`flex w-full\r
                                                 justify-center gap-4`,children:[e("button",{onClick:()=>o(!1),className:"btn bg-primary text-white !mt-6 w-full max-w-[150px] border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",children:"cancel"}),e("button",{type:"submit",className:"btn bg-primary text-white !mt-6 w-full max-w-[150px] border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",children:"Add"})]})]})})]})})})})]})})]})};export{te as default};
