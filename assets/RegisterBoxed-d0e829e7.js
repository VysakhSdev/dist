import{a3 as R,r as c,u as H,a as Q,M as Y,g as J,A as o,d as K,s as W,z as X,t as M,p as ee,v as te,j as r,F,c as s,I as ae,w as A,Q as se,a4 as re}from"./index-7a7cd404.js";import{I as le}from"./IconMail-73cbbeaf.js";import{I as ie}from"./IconLockDots-213d029e.js";import{I as ne}from"./IconPhone-8f68d79a.js";import{I as ce}from"./IconMapPin-aec8109c.js";import{S as p}from"./Toast-8d4a8ec4.js";const ge=()=>{const P=R(),[e,n]=c.useState({name:"",email:"",franchise:"",password:"",address:"",dateOfBirth:"",phone:"",packageType:"",packageAmount:"",packageAmountGst:"",state:"",district:"",zonal:"",panchayath:"",userId:P.id,franchiseName:""}),[m,g]=c.useState([]),[f,v]=c.useState([]),[b,C]=c.useState([]),[I,L]=c.useState([]),[h,N]=c.useState(""),[d,x]=c.useState(""),[u,y]=c.useState(""),[w,T]=c.useState(!1),{stateList:k}=H(t=>t.location),E=Q(),D=Y();c.useEffect(()=>{E(J())},[E]),c.useEffect(()=>{V()},[e.packageAmount]),c.useEffect(()=>{G()},[e==null?void 0:e.packageType]),c.useEffect(()=>{h&&((e==null?void 0:e.franchise)==="District Franchise"?Z():_()),d&&((e==null?void 0:e.franchise)==="Zonal Franchise"?O():j()),u&&q()},[h,d,u]);const U=()=>{T(t=>!t)},_=async()=>{var t;try{const a=await o("get",`${K}/${h}`);a instanceof Error?console.error("Error fetching state list:",a.message):a.status===200?g((t=a==null?void 0:a.data)==null?void 0:t.districts):console.error("Error fetching state list. Unexpected status:",a.status)}catch(a){console.error("Error fetching state list:",a)}},Z=async()=>{var t;try{const a=await o("get",`${W}/${h}`);a instanceof Error?console.error("Error fetching state list:",a.message):a.status===200?g((t=a==null?void 0:a.data)==null?void 0:t.districts):console.error("Error fetching state list. Unexpected status:",a.status)}catch(a){console.error("Error fetching state list:",a)}},j=async()=>{var t;try{const a=await o("get",`${X}/${d}`);console.log(a),a instanceof Error?console.error("Error fetching state list:",a.message):a.status===200?v((t=a==null?void 0:a.data)==null?void 0:t.zonals):console.error("Error fetching state list. Unexpected status:",a.status)}catch(a){console.error("Error fetching state list:",a)}},O=async()=>{var t;try{const a=await o("get",`${M}/${d}`);console.log(a),a instanceof Error?console.error("Error fetching state list:",a.message):a.status===200?v((t=a==null?void 0:a.data)==null?void 0:t.zonals):console.error("Error fetching state list. Unexpected status:",a.status)}catch(a){console.error("Error fetching state list:",a)}},q=async()=>{var t;try{const a=await o("get",`${ee}/${u}`);console.log(a,"dhsjk"),a instanceof Error?console.error("Error fetching state list:",a.message):a.status===200?C((t=a==null?void 0:a.data)==null?void 0:t.panchayaths):console.error("Error fetching state list. Unexpected status:",a.status)}catch(a){console.error("Error fetching state list:",a)}},G=async()=>{var t;try{const a=await o("get",te);if(a instanceof Error)console.error("Error fetching state list:",a.message);else if(a.status===200){const l=await((t=a==null?void 0:a.data)==null?void 0:t.packageData.filter(i=>(e==null?void 0:e.packageType)==="Franchise"?(i==null?void 0:i.franchiseName)!=="Courses"&&(i==null?void 0:i.franchiseName)!=="Signals":(i==null?void 0:i.franchiseName)===(e==null?void 0:e.packageType)));console.log(l),L(l)}else console.error("Error fetching state list. Unexpected status:",a.status)}catch(a){console.error("Error fetching state list:",a)}},$=async t=>{var a,l;t.preventDefault();try{const i=await o("post",re,e);i instanceof Error?console.error("Error fetching state list:",i.message):i.status===200?(n({name:"",email:"",franchise:"",password:"",address:"",dateOfBirth:"",phone:"",packageType:"",packageAmount:"",packageAmountGst:"",state:"",district:"",zonal:"",panchayath:"",userId:"",franchiseName:""}),D("/auth/boxed-signin"),p({message:"Member added successfully",type:!0})):p({message:"Member added failed",type:!1})}catch(i){console.log(i),p({message:(l=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:l.message,type:!1})}},S=I.map(t=>({value:t==null?void 0:t.packageName,label:(t==null?void 0:t.packageName)||(t==null?void 0:t.franchiseName),packageAmount:t.packageAmount})),V=()=>{if(e!=null&&e.packageAmount){const t=Number(e==null?void 0:e.packageAmount),a=t*.18,l=t+a;n({...e,packageAmountGst:l})}},z=t=>{const a=t.target.value,l=k.find(i=>i.stateName===a);l&&(n({...e,state:l.stateName}),N(l.id))},B=new Date().toISOString().split("T")[0];return r(F,{children:[s("div",{className:"absolute inset-0",children:s("img",{src:"/assets/images/auth/bg-gradient.png",alt:"image",className:"h-full w-full object-cover"})}),r("div",{className:"relative flex min-h-screen items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center bg-no-repeat px-6 py-10 dark:bg-[#060818] sm:px-16",children:[s("img",{src:"/assets/images/auth/coming-soon-object1.png",alt:"image",className:"absolute left-0 top-1/2 h-full max-h-[893px] -translate-y-1/2"}),s("img",{src:"/assets/images/auth/coming-soon-object2.png",alt:"image",className:"absolute left-24 top-0 h-40 md:left-[30%]"}),s("img",{src:"/assets/images/auth/coming-soon-object3.png",alt:"image",className:"absolute right-0 top-0 h-[300px]"}),s("img",{src:"/assets/images/auth/polygon-object.svg",alt:"image",className:"absolute bottom-0 end-[28%]"}),s("div",{className:"relative w-full max-w-[870px] rounded-md bg-[linear-gradient(45deg,#fff9f9_0%,rgba(255,255,255,0)_25%,rgba(255,255,255,0)_75%,_#fff9f9_100%)] p-2 dark:bg-[linear-gradient(52.22deg,#0E1726_0%,rgba(14,23,38,0)_18.66%,rgba(14,23,38,0)_51.04%,rgba(14,23,38,0)_80.07%,#0E1726_100%)]",children:r("div",{className:"relative flex flex-col justify-center rounded-md bg-white/60 backdrop-blur-lg dark:bg-black/50 px-6 lg:min-h-[758px] py-20 pt-10",children:[s("div",{className:"w-full flex justify-center mb-10",children:s("img",{className:"w-[150px] text-center",src:"/marketlogo.png",alt:"logo"})}),r("div",{className:"mx-auto w-full",children:[s("div",{className:"mb-10 ",children:s("h1",{className:"text-3xl font-extrabold uppercase text-center !leading-snug text-primary md:text-4xl",children:"Sign Up"})}),r("form",{className:"space-y-5 dark:text-white",onSubmit:$,children:[r("div",{className:"flex flex-col lg:flex-row gap-5 lg:ml-4 lg:flex-wrap",children:[r("div",{className:"space-y-5 lg:w-[375px]",children:[r("div",{children:[s("label",{htmlFor:"Name",children:"Name"}),r("div",{className:"relative text-white-dark",children:[s("input",{onChange:t=>n({...e,name:t.target.value}),id:"Name",type:"text",required:!0,placeholder:"Enter Name",className:"form-input ps-10 placeholder:text-white-dark"}),s("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:s(ae,{fill:!0})})]})]}),r("div",{children:[s("label",{htmlFor:"Email",children:"Email"}),r("div",{className:"relative text-white-dark",children:[s("input",{onChange:t=>n({...e,email:t.target.value}),id:"Email",type:"email",required:!0,placeholder:"Enter Email",className:"form-input ps-10 placeholder:text-white-dark"}),s("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:s(le,{fill:!0})})]})]}),r("div",{children:[s("label",{htmlFor:"Email",children:"Phone"}),r("div",{className:"relative text-white-dark",children:[s("input",{onChange:t=>{const i=t.target.value.replace(/\D/g,"").slice(0,15);n({...e,phone:i})},id:"Phone",required:!0,type:"number",placeholder:"Enter Phone",className:"form-input ps-10 placeholder:text-white-dark"}),s("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:s(ne,{fill:!0})})]})]}),r("div",{children:[s("label",{htmlFor:"Email",children:"Address"}),r("div",{className:"relative text-white-dark",children:[s("span",{className:"absolute start-4 top-1/4 -translate-y-1/2",children:s(ce,{fill:!0})}),s("textarea",{onChange:t=>n({...e,address:t.target.value}),id:"Address",required:!0,placeholder:"Enter Your Address",className:"form-input ps-10 placeholder:text-white-dark"})]})]}),r("div",{children:[s("label",{htmlFor:"Password",children:"Password"}),r("div",{className:"relative text-white-dark",children:[s("input",{onChange:t=>n({...e,password:t.target.value}),id:"Password",type:w?"text":"password",required:!0,placeholder:"Enter Password",className:"form-input ps-10 placeholder:text-white-dark"}),s("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:s(ie,{fill:!0})}),s("button",{type:"button",onClick:U,className:"absolute end-4 top-1/2 -translate-y-1/2 cursor-pointer",children:w?s("i",{className:"fa-solid fa-eye-slash"}):s("i",{className:"fa-solid fa-eye"})})]})]}),r("div",{children:[s("label",{htmlFor:"Email",children:"Date Of Birth"}),s("div",{className:"relative text-white-dark",children:s("input",{onChange:t=>n({...e,dateOfBirth:t.target.value}),id:"dateOfBirth",type:"date",required:!0,max:B,className:"form-input ps-10 placeholder:text-white-dark"})})]})]}),r("div",{className:"flex flex-col space-y-5 max-w-[375px] w-full",children:[r("div",{children:[s("label",{htmlFor:"franchise",children:"Package Type"}),s("div",{className:"relative text-white-dark",children:r("select",{onChange:t=>n({...e,packageType:t.target.value,franchise:""}),value:e==null?void 0:e.packageType,className:"form-input ps-10 placeholder:text-white-dark",children:[s("option",{children:" select Package type "}),s("option",{value:"Franchise",children:" Franchise "}),s("option",{value:"Courses",children:"Courses "}),s("option",{value:"Signals",children:"Signals"})]})})]}),r("div",{children:[s("label",{htmlFor:"package",children:"Package Name"}),s("div",{className:"relative text-white-dark",children:r("select",{onChange:t=>{const a=t.target.value,l=S.find(i=>i.value===a);l&&(n({...e,franchise:l.value,packageAmount:l.packageAmount,state:"",district:"",franchiseName:""}),N(""),x(""),y(""))},value:e.franchise,className:"form-input ps-10 placeholder:text-white-dark",children:[s("option",{children:"Select a Package "}),S.map(t=>s("option",{value:t.value,children:t.label},t.value))]})})]}),r("div",{children:[s("label",{htmlFor:"packageAmount",children:"PackageAmount"}),r("div",{className:"relative text-white-dark",children:[s("input",{id:"PackageAmount",type:"text",value:e==null?void 0:e.packageAmount,placeholder:"packageAmount",readOnly:!0,className:"form-input ps-10 placeholder:text-white-dark"}),s("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:s(A,{fill:!0})})]})]}),r("div",{children:[s("label",{htmlFor:"packageAmountGst",children:"packageAmountGst"}),r("div",{className:"relative text-white-dark",children:[s("input",{id:"packageAmountGst",type:"text",value:e==null?void 0:e.packageAmountGst,placeholder:"packageAmountGst",readOnly:!0,className:"form-input ps-10 placeholder:text-white-dark"}),s("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:s(A,{fill:!0})})]})]}),((e==null?void 0:e.franchise)==="District Franchise"||(e==null?void 0:e.franchise)==="Zonal Franchise"||(e==null?void 0:e.franchise)==="Mobile Franchise"||(e==null?void 0:e.packageType)==="Courses"||(e==null?void 0:e.packageType)==="Signals")&&r(F,{children:[r("div",{children:[s("label",{htmlFor:"Email",children:"State"}),s("div",{className:"relative text-white-dark",children:r("select",{className:"form-input ps-10 placeholder:text-white-dark",required:!0,onChange:z,value:e.state,children:[s("option",{value:"",children:"Select State"},"default"),k.map(t=>s("option",{value:t.stateName,children:t.stateName},t.id))]})})]}),r("div",{children:[s("label",{htmlFor:"district",children:(e==null?void 0:e.franchise)==="District Franchise"?"District Franchise Name":"District"}),s("div",{className:"relative text-white-dark",children:r("select",{className:"form-input ps-10 placeholder:text-white-dark",required:!0,onChange:t=>{const a=t.target.value,l=m.find(i=>i.name===a);console.log(a),console.log(l),l&&(n(i=>({...i,[i.franchise==="District Franchise"?"franchiseName":"district"]:l==null?void 0:l.name})),x(l==null?void 0:l.id))},value:(e==null?void 0:e.franchise)==="District Franchise"?e.franchiseName:e.district,children:[s("option",{children:"Select District "}),m.map(t=>s("option",{value:t.name,children:t.name},t.id))]})})]})]}),((e==null?void 0:e.franchise)==="Zonal Franchise"||(e==null?void 0:e.franchise)==="Mobile Franchise"||(e==null?void 0:e.packageType)==="Courses"||(e==null?void 0:e.packageType)==="Signals")&&r("div",{children:[s("label",{htmlFor:"zonal",children:(e==null?void 0:e.franchise)==="Zonal Franchise"?"Zonal Franchise Name":"Zonal"}),s("div",{className:"relative text-white-dark",children:r("select",{className:"form-input ps-10 placeholder:text-white-dark",required:!0,onChange:t=>{const a=t.target.value,l=f.find(i=>i.name===a);l&&(n(i=>({...i,[(e==null?void 0:e.franchise)==="Zonal Franchise"?"franchiseName":"zonal"]:l==null?void 0:l.name})),y(l==null?void 0:l.id))},value:(e==null?void 0:e.franchise)==="Zonal Franchise"?e.franchiseName:e.zonal,children:[r("option",{value:"",children:["Select Zonal"," "]},"default"),f.map(t=>s("option",{children:t.name},t.id))]})})]}),((e==null?void 0:e.franchise)==="Mobile Franchise"||(e==null?void 0:e.packageType)==="Courses"||(e==null?void 0:e.packageType)==="Signals")&&r("div",{children:[s("label",{htmlFor:"Email",children:"Panchayath"}),s("div",{className:"relative text-white-dark",children:r("select",{onChange:t=>{n({...e,panchayath:t.target.value})},className:"form-input ps-10 placeholder:text-white-dark",required:!0,children:[s("option",{children:"Select panchayath "},"default"),b.map(t=>s("option",{children:t.name},t.id))]})})]})]})]}),s("div",{className:"w-full flex justify-center",children:s("button",{type:"submit",className:"btn bg-primary text-white !mt-6 w-1/2 border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",children:"Sign Up"})})]}),s("div",{className:"relative my-7 text-center md:mb-9",children:r("div",{className:"text-center dark:text-white",children:["Already have an account ? ",s(se,{to:"/auth/boxed-signin",className:"uppercase text-primary underline transition hover:text-black dark:hover:text-white",children:"LOG IN"})]})})]})]})})]})]})};export{ge as default};
