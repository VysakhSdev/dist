import{r as s,u as z,a as O,h as Z,A as y,i as Y,k as _,l as $,j as t,F as q,c as e,m as P,B as G,n as J}from"./index-7a7cd404.js";import{Y as o,y as x}from"./transition-4e664467.js";const W=()=>{const[b,m]=s.useState(!1),[N,h]=s.useState(!1),[i,f]=s.useState(null),[C,F]=s.useState(""),[S,w]=s.useState(!1),[k,L]=s.useState([]),[u,E]=s.useState([]),[j,A]=s.useState([]),[r,U]=s.useState({action:"",package:"",amount:""}),[M,v]=s.useState(!1),{user:n}=z(a=>a.user),T=O();s.useEffect(()=>{T(Z()),H(),(n==null?void 0:n.packageType)!=="Franchise"&&I(),R()},[]);const D=async()=>{var a,l;if(i)try{v(!0);const V={headers:{Authorization:`Bearer ${sessionStorage.getItem("User")}`,"content-type":"multipart/form-data"}},c=new FormData;c.append("transactionNumber",C),c.append("screenshot",i,i==null?void 0:i.name),c.append("reqPackage",r==null?void 0:r.package),c.append("amount",r==null?void 0:r.amount),c.append("action",r==null?void 0:r.action);const p=await P.post(`${G}${J}`,c,V);console.log(p),f(null),sessionStorage.setItem("status",(l=(a=p==null?void 0:p.data)==null?void 0:a.updatedUser)==null?void 0:l.userStatus),m(!1),h(!1),w(!1)}catch(d){console.error("Upload failed:",d)}finally{v(!1)}else w(!0)},B=a=>{var d;const l=(d=a.target.files)==null?void 0:d[0];f(l||null)},H=async()=>{var a;try{const l=await y("get",Y);l instanceof Error?console.error("Error fetching state list:",l.message):l.status===200?L((a=l==null?void 0:l.data)==null?void 0:a.addOns):console.error("Error fetching state list. Unexpected status:",l.status)}catch(l){console.error("Error fetching state list:",l)}},I=async()=>{var a;try{const l=await y("get",_);l instanceof Error?console.error("Error fetching state list:",l.message):l.status===200?E((a=l==null?void 0:l.data)==null?void 0:a.anotherPackages):console.error("Error fetching state list. Unexpected status:",l.status)}catch(l){console.error("Error fetching state list:",l)}},R=async()=>{var a;try{const l=await y("get",$);console.log(l,"renewalPackageUrl"),l instanceof Error?console.error("Error fetching state list:",l.message):l.status===200?A((a=l==null?void 0:l.data)==null?void 0:a.renewPackages):console.error("Error fetching state list. Unexpected status:",l.status)}catch(l){console.error("Error fetching state list:",l)}},g=(a,l)=>{h(!0),U({...r,package:a==null?void 0:a.packageName,amount:a==null?void 0:a.packageAmount,action:l})};return t(q,{children:[t("div",{children:[t("div",{className:"panel min-h-[200px] max-w-md sm:h-auto flex  rounded-[14px] justify-between bg-primary text-white relative",children:[t("div",{className:"flex flex-col gap-5 z-10",children:[e("div",{className:" dark:text-white-light",children:t("h5",{className:" text-md ",children:[e("span",{className:"text-4xl font-bold",children:n==null?void 0:n.daysUntilRenewal})," day left"]})}),e("p",{className:"text-left sm:text-left max-w-[230px]",children:"Your monthly subscription plan has 10 days to renew Subscription is 0 Please upload the screenshot"}),e("button",{onClick:()=>m(!0),type:"button",className:"text-primary  bg-warning z-10 font-bold rounded-lg border-warning p-2 mr-auto border ",children:"Subscription Package"})]}),e("img",{className:"absolute right-0 top-0 h-[95%] z-0",src:"/assets/images/subscription.png",alt:""})]}),t("div",{className:"mt-4 flex flex-col gap-2 ",children:[e("h1",{className:"text-xl font-semibold mt-5",children:"Transaction History"}),e("div",{className:"w-full h-[1.8px] bg-warning mb-2"}),t("div",{className:"w-full flex justify-between min-h-[100px] bg-[#DDE4EB] rounded-3xl p-4",children:[t("div",{className:"flex gap-4",children:[t("svg",{className:"w-[40px] h-[68px]",width:"23",height:"12",viewBox:"0 0 23 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{d:"M5.49425 1.45386C5.19017 1.45386 4.94368 1.2071 4.94368 0.90271C4.94368 0.598322 5.19017 0.351562 5.49425 0.351562H9.89885C10.507 0.351562 11 0.845076 11 1.45386V5.86303C11 6.16743 10.7535 6.41418 10.4494 6.41418C10.1453 6.41418 9.89885 6.16743 9.89885 5.86303V2.22184L0.93989 11.1901C0.72488 11.4054 0.376272 11.4054 0.161262 11.1901C-0.053754 10.9749 -0.053754 10.6259 0.161262 10.4107L9.10878 1.45386H5.49425Z",fill:"#09FF30"}),e("path",{d:"M17.1479 10.2405C17.4514 10.2204 17.7136 10.4503 17.7338 10.754C17.754 11.0577 17.5243 11.3203 17.2209 11.3404L12.826 11.6321C12.2192 11.6723 11.6946 11.2125 11.6543 10.6051L11.3623 6.20561C11.3421 5.90188 11.5718 5.63935 11.8752 5.61921C12.1786 5.59907 12.4409 5.82896 12.461 6.13269L12.7022 9.76589L21.0476 0.224009C21.2479 -0.00497913 21.5957 -0.0280638 21.8245 0.172448C22.0533 0.373016 22.0764 0.721182 21.8761 0.950226L13.5413 10.4799L17.1479 10.2405Z",fill:"#09FF30"})]}),t("div",{className:"flex flex-col",children:[e("h4",{className:"text-primary font-semibold text-lg",children:"Name"}),e("h6",{className:"text-primary",children:"first level"}),e("span",{className:"text-primary",children:"20-07-2024"})]})]}),t("div",{className:"flex flex-col gap-2",children:[e("h3",{className:"text-primary font-bold text-lg",children:"₹56788"}),e("span",{className:`text-white bg-green-500 px-2 py-1 rounded-[10px]\r
              {status === 'accepted' ? 'bg-green-500' : status === 'rejected' ? 'bg-red' : 'bg-yellow'}`,children:"Accepted"})]})]}),t("div",{className:"w-full flex justify-between min-h-[100px] bg-[#DDE4EB] rounded-3xl p-4",children:[t("div",{className:"flex gap-4",children:[t("svg",{className:"w-[40px] h-[68px]",width:"23",height:"12",viewBox:"0 0 23 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{d:"M5.49425 1.45386C5.19017 1.45386 4.94368 1.2071 4.94368 0.90271C4.94368 0.598322 5.19017 0.351562 5.49425 0.351562H9.89885C10.507 0.351562 11 0.845076 11 1.45386V5.86303C11 6.16743 10.7535 6.41418 10.4494 6.41418C10.1453 6.41418 9.89885 6.16743 9.89885 5.86303V2.22184L0.93989 11.1901C0.72488 11.4054 0.376272 11.4054 0.161262 11.1901C-0.053754 10.9749 -0.053754 10.6259 0.161262 10.4107L9.10878 1.45386H5.49425Z",fill:"#FFA500"}),e("path",{d:"M17.1479 10.2405C17.4514 10.2204 17.7136 10.4503 17.7338 10.754C17.754 11.0577 17.5243 11.3203 17.2209 11.3404L12.826 11.6321C12.2192 11.6723 11.6946 11.2125 11.6543 10.6051L11.3623 6.20561C11.3421 5.90188 11.5718 5.63935 11.8752 5.61921C12.1786 5.59907 12.4409 5.82896 12.461 6.13269L12.7022 9.76589L21.0476 0.224009C21.2479 -0.00497913 21.5957 -0.0280638 21.8245 0.172448C22.0533 0.373016 22.0764 0.721182 21.8761 0.950226L13.5413 10.4799L17.1479 10.2405Z",fill:"#FFA500"})]}),t("div",{className:"flex flex-col",children:[e("h4",{className:"text-primary font-semibold text-lg",children:"Name"}),e("h6",{className:"text-primary",children:"first level"}),e("span",{className:"text-primary",children:"20-07-2024"})]})]}),t("div",{className:"flex flex-col gap-2",children:[e("h3",{className:"text-primary font-bold text-lg",children:"₹56788"}),e("span",{className:`text-white bg-yellow-500 px-2 py-1 rounded-[10px]\r
              {status === 'accepted' ? 'bg-green-500' : status === 'rejected' ? 'bg-red' : 'bg-yellow'}`,children:"Pending"})]})]}),t("div",{className:"w-full flex justify-between min-h-[100px] bg-[#DDE4EB] rounded-3xl p-4",children:[t("div",{className:"flex gap-4",children:[t("svg",{className:"w-[40px] h-[68px]",width:"23",height:"12",viewBox:"0 0 23 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{d:"M5.49425 1.45386C5.19017 1.45386 4.94368 1.2071 4.94368 0.90271C4.94368 0.598322 5.19017 0.351562 5.49425 0.351562H9.89885C10.507 0.351562 11 0.845076 11 1.45386V5.86303C11 6.16743 10.7535 6.41418 10.4494 6.41418C10.1453 6.41418 9.89885 6.16743 9.89885 5.86303V2.22184L0.93989 11.1901C0.72488 11.4054 0.376272 11.4054 0.161262 11.1901C-0.053754 10.9749 -0.053754 10.6259 0.161262 10.4107L9.10878 1.45386H5.49425Z",fill:"#FF0000"}),e("path",{d:"M17.1479 10.2405C17.4514 10.2204 17.7136 10.4503 17.7338 10.754C17.754 11.0577 17.5243 11.3203 17.2209 11.3404L12.826 11.6321C12.2192 11.6723 11.6946 11.2125 11.6543 10.6051L11.3623 6.20561C11.3421 5.90188 11.5718 5.63935 11.8752 5.61921C12.1786 5.59907 12.4409 5.82896 12.461 6.13269L12.7022 9.76589L21.0476 0.224009C21.2479 -0.00497913 21.5957 -0.0280638 21.8245 0.172448C22.0533 0.373016 22.0764 0.721182 21.8761 0.950226L13.5413 10.4799L17.1479 10.2405Z",fill:"#FF0000"})]}),t("div",{className:"flex flex-col",children:[e("h4",{className:"text-primary font-semibold text-lg",children:"Name"}),e("h6",{className:"text-primary",children:"first level"}),e("span",{className:"text-primary",children:"20-07-2024"})]})]}),t("div",{className:"flex flex-col gap-2",children:[e("h3",{className:"text-primary font-bold text-lg",children:"₹56788"}),e("span",{className:`text-white bg-red-500 px-2 py-1 rounded-[10px]\r
              {status === 'accepted' ? 'bg-green-500' : status === 'rejected' ? 'bg-red' : 'bg-yellow'}`,children:"Regected"})]})]})]})]}),e(o,{appear:!0,show:b,as:s.Fragment,children:t(x,{as:"div",open:b,onClose:()=>{m(!1)},children:[e(o.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0"})}),e("div",{id:"register_modal",className:"fixed inset-0 bg-[black]/60 z-[999] overflow-y-auto",children:e("div",{className:"flex items-start justify-center min-h-screen px-4",children:e(o.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t(x.Panel,{className:"panel border-0 py-1 px-4 rounded-lg overflow-hidden w-full max-w-[500px] my-8 text-black dark:text-white-dark",children:[t("div",{className:"flex items-center justify-between p-5 font-semibold text-lg dark:text-white",children:[e("h5",{className:"text-warning",children:"Renewal Package"}),e("button",{type:"button",onClick:()=>m(!1),className:"text-white-dark hover:text-dark text-[28px] p-2",children:"×"})]}),e("div",{className:"p-5",children:t("div",{className:"flex flex-col",children:[(n==null?void 0:n.renewalStatus)&&t("div",{children:[e("h3",{className:"text-primary font-bold mb-2",children:"Add on"}),k.map(a=>e("div",{onClick:()=>g(a,"addOn"),className:`w-full flex justify-between min-h-[80px] cursor-pointer bg-primary rounded-3xl p-5 mb-2\r
                \r
                `,children:e("div",{className:"flex gap-4",children:t("div",{className:"flex flex-col gap-2",children:[e("h4",{className:"text-white  text-base",children:a==null?void 0:a.packageName}),t("span",{className:"text-warning font-semiboldy",children:["₹ ",a==null?void 0:a.packageAmount]})]})})}))]}),!(n!=null&&n.renewalStatus)&&t("div",{children:[e("h3",{className:"text-primary font-bold mb-2",children:"Renewal Signals"}),j.map(a=>e("div",{onClick:()=>g(a,"renewal"),className:"w-full flex justify-between min-h-[80px] bg-primary rounded-3xl p-5 mb-2 cursor-pointer  ",children:e("div",{className:"flex gap-4",children:t("div",{className:"flex flex-col gap-2",children:[e("h4",{className:"text-white  text-base",children:a==null?void 0:a.packageName}),t("span",{className:"text-warning font-semiboldy",children:["₹ ",a==null?void 0:a.packageAmount]})]})})}))]}),(n==null?void 0:n.packageType)!=="Franchise"&&t("div",{children:[e("h3",{className:"text-primary font-bold mb-2",children:"convert Packages"}),u==null?void 0:u.map(a=>e("div",{onClick:()=>g(a,"convert"),className:`w-full flex justify-between min-h-[80px] bg-primary rounded-3xl p-5 mb-2 cursor-pointer\r
                \r
                `,children:e("div",{className:"flex gap-4",children:t("div",{className:"flex flex-col gap-2",children:[e("h4",{className:"text-white  text-base",children:a==null?void 0:a.packageName}),t("span",{className:"text-warning font-semiboldy",children:["₹ ",a==null?void 0:a.packageAmount]})]})})}))]})]})})]})})})})]})}),e(o,{appear:!0,show:N,as:s.Fragment,children:t(x,{as:"div",open:N,onClose:()=>{h(!1)},children:[e(o.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0"})}),e("div",{id:"register_modal",className:"fixed inset-0 bg-[black]/60 z-[999] overflow-y-auto",children:e("div",{className:"flex items-start justify-center min-h-screen px-4",children:e(o.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t(x.Panel,{className:"panel border-0 py-1 px-4 rounded-lg overflow-hidden w-full max-w-[500px] my-8 text-black dark:text-white-dark",children:[t("div",{className:"flex items-center justify-between p-5 font-semibold text-lg dark:text-white",children:[e("h5",{className:"text-warning",children:"Renewal Package"}),e("button",{type:"button",onClick:()=>h(!1),className:"text-white-dark hover:text-dark text-[28px] p-2",children:"×"})]}),t("div",{className:"p-5",children:[e("div",{className:"flex flex-col",children:t("div",{children:[e("h3",{className:"text-primary font-semibold",children:r==null?void 0:r.package}),t("h1",{className:"text-2xl text-primary font-bold mb-4",children:["₹",r==null?void 0:r.amount]}),t("label",{htmlFor:"transactionId",className:"text-[14px] text-primary",children:["Your Transaction Id"," "]}),e("input",{type:"text",id:"transactionId",className:"w-full border border-solid border-primary p-2 rounded-md outline-primary",onChange:a=>F(a.target.value)}),e("label",{htmlFor:"transactionId",className:"mt-3 text-[14px] text-primary",children:"Your payment screenshot"}),t("label",{htmlFor:"imageUpload2",className:"btn btn-outline-primary text-sm p-2 text-primary",children:["Select Document",e("input",{type:"file",id:"imageUpload2",className:"hidden",onChange:B,accept:"image/*"})]}),i&&t("div",{className:"flex items-center mt-2",children:[t("p",{className:"text-sm text-danger mt-2 mr-2",children:["File selected: ",i==null?void 0:i.name]}),e("button",{type:"button",onClick:()=>f(null),className:"text-primary hover:danger-gray-300",children:"✕"})]}),S&&e("div",{className:"flex items-center mt-2",children:e("p",{className:"text-sm text-danger mt-2 mr-2",children:"Select a document"})})]})}),e("div",{className:"flex justify-end items-center mt-4",children:e("button",{type:"button",onClick:()=>{D()},className:"btn btn-primary text-sm ltr:ml-2 rtl:mr-2 p-2",children:M?"Saving...":"Save"})})]})]})})})})]})})]})};export{W as default};
